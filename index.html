<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Moon Phase</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="water.dark.min.css" />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŒ•</text></svg>"
    />
    <script src="moon-phase.min.js"></script>
  </head>
  <body>
    <div class="center">
      <h2>Today</h2>
      <h4 id="date"></h4>
      <h4 id="time"></h4>
      <p id="moon" class="large"></p>
      <p id="description"></p>
      <p class="footer">
        <a href="https://github.com/foostackdev/moon-phase" target="_blank"
          >GitHub</a
        >
      </p>
    </div>
    <script>
      let today = new Date();
      let moon = Moon.phase(
        today.getFullYear(),
        today.getMonth() + 1,
        today.getDate()
      );

      setText('#time', today.toLocaleTimeString('en-US'));

      setText(
        '#date',
        `${new Intl.DateTimeFormat('en-US', { weekday: 'short' }).format(
          today
        )} ${today.toLocaleDateString('en-us', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
        })}`
      );

      setText('#moon', moon.display);

      let descArr = [];
      for (let s of moon.name.split('-')) {
        descArr.push(capitalizeFirstLetter(s));
      }

      setText('#description', `It's ${descArr.join(' ')}!`);

      function capitalizeFirstLetter(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
      }

      let intervalId = setInterval(function () {
        setText('#time', new Date().toLocaleTimeString('en-US'));
      }, 1000);

      function setText(selector, value) {
        document.querySelector(selector).textContent = value;
      }
    </script>
  </body>
</html>
