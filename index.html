<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Moon Phase</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="water.dark.min.css" />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŒ•</text></svg>"
    />
    <script src="moon-phase.min.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
      integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="center">
      <h2>Today</h2>
      <h4 id="date"></h4>
      <h4 id="time"></h4>
      <p id="moon" class="large"></p>
      <p id="description"></p>
      <p class="footer">
        <a href="https://github.com/foostackdev/moon-phase" target="_blank"
          >GitHub</a
        >
      </p>
    </div>
    <script>
      let today = new Date();
      let moon = Moon.phase(
        today.getFullYear(),
        today.getMonth() + 1,
        today.getDate()
      );

      let descArr = [];
      for (let s of moon.name.split('-')) {
        descArr.push(capitalizeFirstLetter(s));
      }

      $('#time').text(today.toLocaleTimeString('en-US'));

      $('#date').text(
        `${new Intl.DateTimeFormat('en-US', { weekday: 'short' }).format(
          today
        )} ${today.toLocaleDateString('en-us', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
        })}`
      );

      $('#moon').text(moon.display);

      $('#description').text(`It's ${descArr.join(' ')}!`);

      function capitalizeFirstLetter(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
      }

      let intervalId = setInterval(updateTime, 1000);
      function updateTime() {
        $('#time').text(new Date().toLocaleTimeString('en-US'));
      }
    </script>
  </body>
</html>
